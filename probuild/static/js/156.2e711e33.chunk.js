(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[156],{1561:function(e,t,a){"use strict";var n=a(0),l=n.createContext();t.a=l},1627:function(e,t,a){"use strict";var n=a(6),l=a(3),i=a(0),r=a(5),o=a(11),c=a(1684),s=i.forwardRef((function(e,t){var a=e.classes,o=e.className,s=e.component,d=void 0===s?"table":s,u=e.padding,p=void 0===u?"normal":u,m=e.size,v=void 0===m?"medium":m,f=e.stickyHeader,b=void 0!==f&&f,g=Object(n.a)(e,["classes","className","component","padding","size","stickyHeader"]),h=i.useMemo((function(){return{padding:p,size:v,stickyHeader:b}}),[p,v,b]);return i.createElement(c.a.Provider,{value:h},i.createElement(d,Object(l.a)({role:"table"===d?null:"table",ref:t,className:Object(r.default)(a.root,o,b&&a.stickyHeader)},g)))}));t.a=Object(o.a)((function(e){return{root:{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":Object(l.a)({},e.typography.body2,{padding:e.spacing(2),color:e.palette.text.secondary,textAlign:"left",captionSide:"bottom"})},stickyHeader:{borderCollapse:"separate"}}}),{name:"MuiTable"})(s)},1628:function(e,t,a){"use strict";var n=a(3),l=a(6),i=a(0),r=a(5),o=a(11),c=a(1561),s=a(41),d=i.forwardRef((function(e,t){var a=e.classes,o=e.className,s=e.component,d=void 0===s?"tr":s,u=e.hover,p=void 0!==u&&u,m=e.selected,v=void 0!==m&&m,f=Object(l.a)(e,["classes","className","component","hover","selected"]),b=i.useContext(c.a);return i.createElement(d,Object(n.a)({ref:t,className:Object(r.default)(a.root,o,b&&{head:a.head,footer:a.footer}[b.variant],p&&a.hover,v&&a.selected),role:"tr"===d?null:"row"},f))}));t.a=Object(o.a)((function(e){return{root:{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,"&$hover:hover":{backgroundColor:e.palette.action.hover},"&$selected, &$selected:hover":{backgroundColor:Object(s.a)(e.palette.secondary.main,e.palette.action.selectedOpacity)}},selected:{},hover:{},head:{},footer:{}}}),{name:"MuiTableRow"})(d)},1630:function(e,t,a){"use strict";var n=a(3),l=a(6),i=a(0),r=a(5),o=a(11),c=a(1561),s={variant:"body"},d=i.forwardRef((function(e,t){var a=e.classes,o=e.className,d=e.component,u=void 0===d?"tbody":d,p=Object(l.a)(e,["classes","className","component"]);return i.createElement(c.a.Provider,{value:s},i.createElement(u,Object(n.a)({className:Object(r.default)(a.root,o),ref:t,role:"tbody"===u?null:"rowgroup"},p)))}));t.a=Object(o.a)({root:{display:"table-row-group"}},{name:"MuiTableBody"})(d)},1632:function(e,t,a){"use strict";var n=a(6),l=a(3),i=a(0),r=a(5),o=a(11),c=a(15),s=a(41),d=a(1684),u=a(1561),p=i.forwardRef((function(e,t){var a,o,s=e.align,p=void 0===s?"inherit":s,m=e.classes,v=e.className,f=e.component,b=e.padding,g=e.scope,h=e.size,y=e.sortDirection,O=e.variant,j=Object(n.a)(e,["align","classes","className","component","padding","scope","size","sortDirection","variant"]),x=i.useContext(d.a),E=i.useContext(u.a),N=E&&"head"===E.variant;f?(o=f,a=N?"columnheader":"cell"):o=N?"th":"td";var w=g;!w&&N&&(w="col");var _=b||(x&&x.padding?x.padding:"normal"),I=h||(x&&x.size?x.size:"medium"),k=O||E&&E.variant,C=null;return y&&(C="asc"===y?"ascending":"descending"),i.createElement(o,Object(l.a)({ref:t,className:Object(r.default)(m.root,m[k],v,"inherit"!==p&&m["align".concat(Object(c.a)(p))],"normal"!==_&&m["padding".concat(Object(c.a)(_))],"medium"!==I&&m["size".concat(Object(c.a)(I))],"head"===k&&x&&x.stickyHeader&&m.stickyHeader),"aria-sort":C,role:a,scope:w},j))}));t.a=Object(o.a)((function(e){return{root:Object(l.a)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?Object(s.j)(Object(s.a)(e.palette.divider,1),.88):Object(s.b)(Object(s.a)(e.palette.divider,1),.68)),textAlign:"left",padding:16}),head:{color:e.palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary},footer:{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},sizeSmall:{padding:"6px 24px 6px 16px","&:last-child":{paddingRight:16},"&$paddingCheckbox":{width:24,padding:"0 12px 0 16px","&:last-child":{paddingLeft:12,paddingRight:16},"& > *":{padding:0}}},paddingCheckbox:{width:48,padding:"0 0 0 4px","&:last-child":{paddingLeft:0,paddingRight:4}},paddingNone:{padding:0,"&:last-child":{padding:0}},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right",flexDirection:"row-reverse"},alignJustify:{textAlign:"justify"},stickyHeader:{position:"sticky",top:0,left:0,zIndex:2,backgroundColor:e.palette.background.default}}}),{name:"MuiTableCell"})(p)},1633:function(e,t,a){"use strict";var n=a(3),l=a(6),i=a(0),r=a(5),o=a(11),c=a(1561),s={variant:"head"},d=i.forwardRef((function(e,t){var a=e.classes,o=e.className,d=e.component,u=void 0===d?"thead":d,p=Object(l.a)(e,["classes","className","component"]);return i.createElement(c.a.Provider,{value:s},i.createElement(u,Object(n.a)({className:Object(r.default)(a.root,o),ref:t,role:"thead"===u?null:"rowgroup"},p)))}));t.a=Object(o.a)({root:{display:"table-header-group"}},{name:"MuiTableHead"})(d)},1684:function(e,t,a){"use strict";var n=a(0),l=n.createContext();t.a=l},2015:function(e,t,a){"use strict";var n=a(3),l=a(6),i=a(0),r=a(5),o=a(11),c=a(41),s=i.forwardRef((function(e,t){var a=e.absolute,o=void 0!==a&&a,c=e.classes,s=e.className,d=e.component,u=void 0===d?"hr":d,p=e.flexItem,m=void 0!==p&&p,v=e.light,f=void 0!==v&&v,b=e.orientation,g=void 0===b?"horizontal":b,h=e.role,y=void 0===h?"hr"!==u?"separator":void 0:h,O=e.variant,j=void 0===O?"fullWidth":O,x=Object(l.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return i.createElement(u,Object(n.a)({className:Object(r.default)(c.root,s,"fullWidth"!==j&&c[j],o&&c.absolute,m&&c.flexItem,f&&c.light,"vertical"===g&&c.vertical),role:y,ref:t},x))}));t.a=Object(o.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(c.a)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(s)},2052:function(e,t,a){"use strict";var n=a(0),l=new Map,i=function(e){if(!e)return console.warn("useDynamicRefs: Cannot set ref without key ");var t=Object(n.createRef)();return l.set(e,t),t},r=function(e){return e?l.get(e):console.warn("useDynamicRefs: Cannot get ref without key")};t.a=function(){return[r,i]}},3292:function(e,t,a){"use strict";a.r(t);var n=a(13),l=a(7),i=a(18),r=a(19),o=a(0),c=a.n(o),s=a(2052),d=a(1354),u=a(674),p=a(1414),m=a(2015),v=a(1627),f=a(1633),b=a(1628),g=a(1632),h=a(1630),y=a(594),O=a(53),j=a(31),x=a(683),E=a(5),N=a(4),w=a(70),_=a(149),I=a.n(_),k=a(1657),C=a.n(k),z=["palette"],S=Object(x.a)((function(e){e.palette;var t=Object(r.a)(e,z);return{invoiceEditor:{"& h5":{fontSize:15}},root:{width:"100px"},heading:{fontSize:t.typography.pxToRem(15),fontWeight:t.typography.fontWeightRegular}}})),q={id:"",orderNo:"",buyer:{name:"",address:""},seller:{name:"",address:""},item:[],status:"",date:new Date,currency:"",loading:!1};t.default=function(e){var t=e.isNewInvoice,a=(e.toggleInvoiceEditor,Object(o.useState)(!0)),r=Object(i.a)(a,2),x=r[0],_=(r[1],Object(o.useState)(q)),k=Object(i.a)(_,2),z=k[0],R=k[1],T=Object(o.useState)(""),D=Object(i.a)(T,2),M=D[0],A=D[1],F=new Date,W=Object(o.useState)(""),H=Object(i.a)(W,2),V=H[0],L=H[1],P=Object(o.useState)(""),Q=Object(i.a)(P,2),Y=Q[0],B=Q[1],$=Object(o.useState)("0"),J=Object(i.a)($,2),U=J[0],G=(J[1],Object(o.useState)([])),K=Object(i.a)(G,2),X=(K[0],K[1]),Z=Object(o.useState)([]),ee=Object(i.a)(Z,2),te=(ee[0],ee[1],Object(o.useState)("0")),ae=Object(i.a)(te,2),ne=ae[0],le=ae[1],ie=Object(o.useState)(!1),re=Object(i.a)(ie,2),oe=re[0],ce=(re[1],Object(o.useState)(!1)),se=Object(i.a)(ce,2),de=(se[0],se[1]),ue=(Object(j.g)(),Object(j.i)().id),pe=Object(w.a)().user,me=S(),ve=Object(j.g)(),fe=Object(o.useCallback)((function(){var e=Math.random().toString(),t=e.substr(2,e.length-1);R((function(e){return Object(l.a)(Object(l.a)({},e),{},{id:t})}))}),[]),be=[],ge=[],he=[],ye=Object(s.a)(),Oe=Object(i.a)(ye,2),je=Oe[0],xe=Oe[1];Object(o.useEffect)((function(){N.g.get("mjrQuoteEdit/".concat(localStorage.getItem("division"),"/").concat(ue)).then((function(e){var t,a,n,i,r,o,c=e.data;X(null===c||void 0===c?void 0:c.products),A(null===c||void 0===c||null===(t=c.sales)||void 0===t||null===(a=t.party)||void 0===a?void 0:a.firm_name),L(null===c||void 0===c||null===(n=c.sales)||void 0===n?void 0:n.quotation_no),B(null===c||void 0===c||null===(i=c.sales)||void 0===i?void 0:i.po_number),le(null===c||void 0===c||null===(r=c.sales)||void 0===r?void 0:r.discount_in_p),R(Object(l.a)(Object(l.a)({},z),{},{item:null===c||void 0===c||null===(o=c.sales)||void 0===o?void 0:o.quotation_details}))}))}),[ue,t,x,fe]);var Ee=0,Ne=0,we=0,_e=z.item,Ie=void 0===_e?[]:_e,ke=(z.quote,z.vat),Ce=z.loading;return c.a.createElement("div",{className:"m-sm-30"},c.a.createElement(d.a,{elevation:3},c.a.createElement("div",{className:Object(E.default)("invoice-viewer py-4",me.invoiceEditor)},c.a.createElement(O.ValidatorForm,{autocomplete:"off",onSubmit:function(){R(Object(l.a)(Object(l.a)({},z),{},{loading:!0}));var e=[];delete Object(l.a)({},z).loading;var t=Object(n.a)(z.item);we>0?(de(!0),e.is_partial=!0):(e.is_partial=!1,e.is_completed=!0),e.delivery_note_details=t,e.quotation_id=parseInt(ue),e.discount_in_percentage=ne,e.total_value=parseFloat(Ee).toFixed(2),e.grand_total=Ne,e.vat_in_value=parseFloat(ke).toFixed(2),e.user_id=pe.id,e.div_id=localStorage.getItem("division");var a=Object.assign({},e);N.g.post("delivery-notes",a).then((function(e){I.a.fire({title:"Success",type:"success",icon:"success",text:"Data saved successfully."}),ve.push(N.w+"/dnoteview")})).catch((function(e){I.a.fire({title:"Error",type:"error",icon:"warning",text:"Something Went Wrong."}).then((function(e){R(Object(l.a)(Object(l.a)({},z),{},{loading:!1}))}))}))},onError:function(e){return null}},c.a.createElement("div",{className:"viewer_actions px-4 flex justify-between"},c.a.createElement("div",{className:"mb-6"},c.a.createElement("h3",{align:"left"},"DELIVERY NOTE")),c.a.createElement("div",{className:"mb-6"},c.a.createElement(u.a,{className:"mr-4 py-2",variant:"outlined",color:"secondary",onClick:function(){ve.push(N.w+"/quote/".concat(ue,"/accept"))}},c.a.createElement(p.a,null,"cancel")," CANCEL"),c.a.createElement(u.a,{type:"submit",className:"py-2",variant:"outlined",color:"primary",disabled:Ce},c.a.createElement(p.a,null,"save")," SAVE"))),c.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},c.a.createElement("div",null,c.a.createElement("h5",{className:"font-normal capitalize"},c.a.createElement("strong",null,"Quotation Number: ")," ",c.a.createElement("span",null,V)),c.a.createElement("h5",{className:"font-normal capitalize"},c.a.createElement("strong",null,"Company Name: ")," ",c.a.createElement("span",null,M))),c.a.createElement("div",null,c.a.createElement("div",{className:"text-right"},c.a.createElement("h5",{className:"font-normal"},c.a.createElement("strong",null,"Due date: "),c.a.createElement("span",null,C()(F).format("DD MMM YYYY")))),c.a.createElement("div",{className:"text-right"},c.a.createElement("h5",{className:"font-normal"},c.a.createElement("strong",null,"P.O Number: "),c.a.createElement("span",null,Y))))),c.a.createElement(m.a,null),c.a.createElement(v.a,{className:"mb-4"},c.a.createElement(f.a,null,c.a.createElement(b.a,{className:"bg-default"},c.a.createElement(g.a,{className:"pl-sm-24",style:{width:70},align:"left"},"S.NO."),c.a.createElement(g.a,{className:"px-0",style:{width:"400px"}},"RFQ DESCRIPTION"),c.a.createElement(g.a,{className:"px-0",style:{width:70}},"UOM"),c.a.createElement(g.a,{className:"px-0",style:{width:"150px"}},"QUANTITY"),c.a.createElement(g.a,{className:"px-0",style:{width:"150px"}},"DELIVERED QTY"),c.a.createElement(g.a,{className:"px-0",style:{width:"150px"}},"DELIVERING QTY"),c.a.createElement(g.a,{className:"px-0",style:{width:"150px"}},"BALANCE QTY"))),c.a.createElement(h.a,null,Ie.map((function(e,t){return we+=parseInt(e.balance),oe?(Ee+=parseFloat(e.total_amount),ke=(15*(Ee-parseFloat(U*Ee/100))/100).toFixed(2),Ne=(Ee-parseFloat(U*Ee/100)+parseFloat(ke)).toFixed(2)):(Ee+=parseFloat(e.total_amount),ke=(15*Ee/100).toFixed(2),Ne=(Ee+15*Ee/100).toFixed(2)),c.a.createElement(b.a,{key:t},c.a.createElement(g.a,{className:"pl-sm-24 capitalize",align:"left",style:{width:50}},t+1),c.a.createElement(g.a,{className:"pl-0 mr-2 capitalize",align:"left",style:{width:"300px"}},c.a.createElement(O.TextValidator,{label:"description",type:"text",name:"description",variant:"outlined",size:"small",multiline:!0,fullWidth:!0,value:null===e||void 0===e?void 0:e.descriptionss})),c.a.createElement(g.a,{className:"pl-0 capitalize",align:"left",style:{width:70}},c.a.createElement(O.TextValidator,{label:"UOM",type:"text",variant:"outlined",inputProps:{min:0,style:{textAlign:"center"}},size:"small",name:"uom",value:(null===e||void 0===e?void 0:e.unit_of_measure)?null===e||void 0===e?void 0:e.unit_of_measure:" "})),c.a.createElement(g.a,{className:"pl-0 capitalize",align:"center",style:{width:"150px"}},c.a.createElement(O.TextValidator,{label:"Quantity",type:"text",variant:"outlined",inputProps:{min:0,style:{textAlign:"center"}},size:"small",fullWidth:!0,name:"quantity",align:"center",min:"1",max:e.quantity,value:e?e.quantity:"",validators:["required"],errorMessages:["this field is required"]})),c.a.createElement(g.a,{className:"pl-0 capitalize",align:"center",style:{width:"150px"}},c.a.createElement(O.TextValidator,{label:"delivered quantity",type:"text",name:"delivered_quantity",align:"center",inputProps:{min:0,style:{textAlign:"center"}},fullWidth:!0,variant:"outlined",size:"small",value:e.delivered_quantity,validators:["required"],errorMessages:["this field is required"]})),c.a.createElement(g.a,{className:"pl-0 capitalize",align:"center",style:{width:"150px"}},c.a.createElement(O.TextValidator,{label:"delivery quantity",onChange:function(e){return function(e,t){e.persist();var a=Object(n.a)(z.item);a.map((function(a,n){if(t===n){var l=parseInt(a.quantity)-parseInt(a.delivered_quantity);return parseInt(e.target.value)>=parseInt(l)?(a[e.target.name]=parseInt(a.quantity)-parseInt(a.delivered_quantity),a.balance=0):e.target.value<0?(a[e.target.name]=l,a.balance=0):(a[e.target.name]=e.target.value,a.balance=parseInt(a.quantity)-parseInt(a.delivered_quantity)-e.target.value),a}})),R(Object(l.a)(Object(l.a)({},z),{},{item:a}))}(e,t)},type:"text",inputProps:{ref:xe(t+"delivered_quantity"),min:-1,style:{textAlign:"center"}},name:"delivering_quantity",onKeyDown:function(e){!function(e,t,a,n,l,i){if("Enter"===e.key&&!i){t.split(parseInt(t));var r,o=parseInt(t);r=3==localStorage.getItem("division")?++o+"descriptionss":++o+"description";try{var c;console.log(null===(c=je(r).current)||void 0===c?void 0:c.focus())}catch(h){}}if(39==(null===e||void 0===e?void 0:e.keyCode))if(null===a||void 0===a?void 0:a.includes("product_id"))he[parseInt(a)].focus();else if(null===a||void 0===a?void 0:a.includes("purch3ase_price"))ge[parseInt(a)].focus();else if(null==a);else{var s;console.log(null===(s=je(a).current)||void 0===s?void 0:s.focus())}else if(38==(null===e||void 0===e?void 0:e.keyCode)){var d=t.split(parseInt(t)),u=parseInt(t);if(--u>=0){var p=u+d[1];p.includes("product_id")?he[parseInt(p)].focus():p.includes("purchase_3price")?ge[parseInt(p)].focus():p.includes("invoice_no")?be[parseInt(p)].focus():je(p).current.focus()}}else if(40!=(null===e||void 0===e?void 0:e.keyCode)||i){if(37==(null===e||void 0===e?void 0:e.keyCode)){var m,v;if(null==n);else if(n.includes("product_id")?he[parseInt(n)].focus():n.includes("purchase3_price")&&ge[parseInt(n)].focus(),n.includes("invoice_no"))be[parseInt(n)].focus();else console.log(null===(m=je(n))||void 0===m||null===(v=m.current)||void 0===v?void 0:v.focus())}}else{var f=t.split(parseInt(t)),b=parseInt(t),g=++b+f[1];try{g.includes("product_id")?he[parseInt(g)].focus():g.includes("purchase_p3rice")?ge[parseInt(g)].focus():g.includes("invoice_no")?be[parseInt(g)].focus():je(g).current.focus()}catch(h){console.error("eror")}}}(e,t+"delivered_quantity",null,null)},validators:["required","isNumber"],errorMessages:["this field is required","Input is not Valid"],fullWidth:!0,variant:"outlined",size:"small",value:e.delivering_quantity})),c.a.createElement(g.a,{className:"pl-0 capitalize",align:"left"},c.a.createElement(y.a,{label:"Balance Qty",type:"text",variant:"outlined",size:"small",name:"balance",fullWidth:!0,value:e.balance?e.balance:0})))})))),c.a.createElement("div",{className:"flex justify-end px-4 mb-4"},c.a.createElement("div",{className:"flex "},c.a.createElement("div",null)))))))}}}]);