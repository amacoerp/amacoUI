(this["webpackJsonpmatx-react"]=this["webpackJsonpmatx-react"]||[]).push([[154],{1561:function(e,t,a){"use strict";var n=a(0),i=n.createContext();t.a=i},1627:function(e,t,a){"use strict";var n=a(6),i=a(3),l=a(0),r=a(5),o=a(11),c=a(1684),s=l.forwardRef((function(e,t){var a=e.classes,o=e.className,s=e.component,d=void 0===s?"table":s,u=e.padding,p=void 0===u?"normal":u,m=e.size,v=void 0===m?"medium":m,f=e.stickyHeader,g=void 0!==f&&f,b=Object(n.a)(e,["classes","className","component","padding","size","stickyHeader"]),h=l.useMemo((function(){return{padding:p,size:v,stickyHeader:g}}),[p,v,g]);return l.createElement(c.a.Provider,{value:h},l.createElement(d,Object(i.a)({role:"table"===d?null:"table",ref:t,className:Object(r.default)(a.root,o,g&&a.stickyHeader)},b)))}));t.a=Object(o.a)((function(e){return{root:{display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":Object(i.a)({},e.typography.body2,{padding:e.spacing(2),color:e.palette.text.secondary,textAlign:"left",captionSide:"bottom"})},stickyHeader:{borderCollapse:"separate"}}}),{name:"MuiTable"})(s)},1628:function(e,t,a){"use strict";var n=a(3),i=a(6),l=a(0),r=a(5),o=a(11),c=a(1561),s=a(41),d=l.forwardRef((function(e,t){var a=e.classes,o=e.className,s=e.component,d=void 0===s?"tr":s,u=e.hover,p=void 0!==u&&u,m=e.selected,v=void 0!==m&&m,f=Object(i.a)(e,["classes","className","component","hover","selected"]),g=l.useContext(c.a);return l.createElement(d,Object(n.a)({ref:t,className:Object(r.default)(a.root,o,g&&{head:a.head,footer:a.footer}[g.variant],p&&a.hover,v&&a.selected),role:"tr"===d?null:"row"},f))}));t.a=Object(o.a)((function(e){return{root:{color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,"&$hover:hover":{backgroundColor:e.palette.action.hover},"&$selected, &$selected:hover":{backgroundColor:Object(s.a)(e.palette.secondary.main,e.palette.action.selectedOpacity)}},selected:{},hover:{},head:{},footer:{}}}),{name:"MuiTableRow"})(d)},1630:function(e,t,a){"use strict";var n=a(3),i=a(6),l=a(0),r=a(5),o=a(11),c=a(1561),s={variant:"body"},d=l.forwardRef((function(e,t){var a=e.classes,o=e.className,d=e.component,u=void 0===d?"tbody":d,p=Object(i.a)(e,["classes","className","component"]);return l.createElement(c.a.Provider,{value:s},l.createElement(u,Object(n.a)({className:Object(r.default)(a.root,o),ref:t,role:"tbody"===u?null:"rowgroup"},p)))}));t.a=Object(o.a)({root:{display:"table-row-group"}},{name:"MuiTableBody"})(d)},1632:function(e,t,a){"use strict";var n=a(6),i=a(3),l=a(0),r=a(5),o=a(11),c=a(15),s=a(41),d=a(1684),u=a(1561),p=l.forwardRef((function(e,t){var a,o,s=e.align,p=void 0===s?"inherit":s,m=e.classes,v=e.className,f=e.component,g=e.padding,b=e.scope,h=e.size,y=e.sortDirection,x=e.variant,E=Object(n.a)(e,["align","classes","className","component","padding","scope","size","sortDirection","variant"]),O=l.useContext(d.a),j=l.useContext(u.a),N=j&&"head"===j.variant;f?(o=f,a=N?"columnheader":"cell"):o=N?"th":"td";var w=b;!w&&N&&(w="col");var _=g||(O&&O.padding?O.padding:"normal"),I=h||(O&&O.size?O.size:"medium"),k=x||j&&j.variant,C=null;return y&&(C="asc"===y?"ascending":"descending"),l.createElement(o,Object(i.a)({ref:t,className:Object(r.default)(m.root,m[k],v,"inherit"!==p&&m["align".concat(Object(c.a)(p))],"normal"!==_&&m["padding".concat(Object(c.a)(_))],"medium"!==I&&m["size".concat(Object(c.a)(I))],"head"===k&&O&&O.stickyHeader&&m.stickyHeader),"aria-sort":C,role:a,scope:w},E))}));t.a=Object(o.a)((function(e){return{root:Object(i.a)({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===e.palette.type?Object(s.j)(Object(s.a)(e.palette.divider,1),.88):Object(s.b)(Object(s.a)(e.palette.divider,1),.68)),textAlign:"left",padding:16}),head:{color:e.palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},body:{color:e.palette.text.primary},footer:{color:e.palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},sizeSmall:{padding:"6px 24px 6px 16px","&:last-child":{paddingRight:16},"&$paddingCheckbox":{width:24,padding:"0 12px 0 16px","&:last-child":{paddingLeft:12,paddingRight:16},"& > *":{padding:0}}},paddingCheckbox:{width:48,padding:"0 0 0 4px","&:last-child":{paddingLeft:0,paddingRight:4}},paddingNone:{padding:0,"&:last-child":{padding:0}},alignLeft:{textAlign:"left"},alignCenter:{textAlign:"center"},alignRight:{textAlign:"right",flexDirection:"row-reverse"},alignJustify:{textAlign:"justify"},stickyHeader:{position:"sticky",top:0,left:0,zIndex:2,backgroundColor:e.palette.background.default}}}),{name:"MuiTableCell"})(p)},1633:function(e,t,a){"use strict";var n=a(3),i=a(6),l=a(0),r=a(5),o=a(11),c=a(1561),s={variant:"head"},d=l.forwardRef((function(e,t){var a=e.classes,o=e.className,d=e.component,u=void 0===d?"thead":d,p=Object(i.a)(e,["classes","className","component"]);return l.createElement(c.a.Provider,{value:s},l.createElement(u,Object(n.a)({className:Object(r.default)(a.root,o),ref:t,role:"thead"===u?null:"rowgroup"},p)))}));t.a=Object(o.a)({root:{display:"table-header-group"}},{name:"MuiTableHead"})(d)},1684:function(e,t,a){"use strict";var n=a(0),i=n.createContext();t.a=i},2015:function(e,t,a){"use strict";var n=a(3),i=a(6),l=a(0),r=a(5),o=a(11),c=a(41),s=l.forwardRef((function(e,t){var a=e.absolute,o=void 0!==a&&a,c=e.classes,s=e.className,d=e.component,u=void 0===d?"hr":d,p=e.flexItem,m=void 0!==p&&p,v=e.light,f=void 0!==v&&v,g=e.orientation,b=void 0===g?"horizontal":g,h=e.role,y=void 0===h?"hr"!==u?"separator":void 0:h,x=e.variant,E=void 0===x?"fullWidth":x,O=Object(i.a)(e,["absolute","classes","className","component","flexItem","light","orientation","role","variant"]);return l.createElement(u,Object(n.a)({className:Object(r.default)(c.root,s,"fullWidth"!==E&&c[E],o&&c.absolute,m&&c.flexItem,f&&c.light,"vertical"===b&&c.vertical),role:y,ref:t},O))}));t.a=Object(o.a)((function(e){return{root:{height:1,margin:0,border:"none",flexShrink:0,backgroundColor:e.palette.divider},absolute:{position:"absolute",bottom:0,left:0,width:"100%"},inset:{marginLeft:72},light:{backgroundColor:Object(c.a)(e.palette.divider,.08)},middle:{marginLeft:e.spacing(2),marginRight:e.spacing(2)},vertical:{height:"100%",width:1},flexItem:{alignSelf:"stretch",height:"auto"}}}),{name:"MuiDivider"})(s)},2052:function(e,t,a){"use strict";var n=a(0),i=new Map,l=function(e){if(!e)return console.warn("useDynamicRefs: Cannot set ref without key ");var t=Object(n.createRef)();return i.set(e,t),t},r=function(e){return e?i.get(e):console.warn("useDynamicRefs: Cannot get ref without key")};t.a=function(){return[r,l]}},3161:function(e,t){e.exports=function(e,t){var a=[];return 0===t.length?a.push({text:e,highlight:!1}):t[0][0]>0&&a.push({text:e.slice(0,t[0][0]),highlight:!1}),t.forEach((function(n,i){var l=n[0],r=n[1];a.push({text:e.slice(l,r),highlight:!0}),i===t.length-1?r<e.length&&a.push({text:e.slice(r,e.length),highlight:!1}):r<t[i+1][0]&&a.push({text:e.slice(r,t[i+1][0]),highlight:!1})})),a}},3361:function(e,t,a){"use strict";a.r(t);var n=a(13),i=a(7),l=a(18),r=a(19),o=a(0),c=a.n(o),s=a(2052),d=a(1354),u=a(674),p=a(1414),m=a(2015),v=a(1627),f=a(1633),g=a(1628),b=a(1632),h=a(1630),y=a(594),x=a(53),E=a(31),O=a(683),j=a(5),N=a(4),w=a(70),_=a(149),I=a.n(_),k=a(1657),C=a.n(k),q=(a(3161),["palette"]),z=Object(O.a)((function(e){e.palette;var t=Object(r.a)(e,q);return{invoiceEditor:{"& h5":{fontSize:15}},root:{width:"100px"},heading:{fontSize:t.typography.pxToRem(15),fontWeight:t.typography.fontWeightRegular}}})),S={id:"",orderNo:"",buyer:{name:"",address:""},seller:{name:"",address:""},item:[],status:"",date:new Date,currency:"",loading:!1};t.default=function(e){var t=e.isNewInvoice,a=(e.toggleInvoiceEditor,Object(o.useState)(!0)),r=Object(l.a)(a,2),O=r[0],_=(r[1],Object(o.useState)(S)),k=Object(l.a)(_,2),q=k[0],R=k[1],T=Object(o.useState)(""),D=Object(l.a)(T,2),M=D[0],A=D[1],F=new Date,W=Object(o.useState)(""),H=Object(l.a)(W,2),V=H[0],L=H[1],P=Object(o.useState)(""),Y=Object(l.a)(P,2),Q=Y[0],U=Y[1],B=Object(o.useState)("0"),$=Object(l.a)(B,2),J=$[0],G=($[1],Object(o.useState)([])),K=Object(l.a)(G,2),X=(K[0],K[1]),Z=Object(o.useState)([]),ee=Object(l.a)(Z,2),te=(ee[0],ee[1],Object(o.useState)("0")),ae=Object(l.a)(te,2),ne=ae[0],ie=ae[1],le=Object(o.useState)(!1),re=Object(l.a)(le,2),oe=re[0],ce=(re[1],Object(o.useState)(!1)),se=Object(l.a)(ce,2),de=(se[0],se[1]),ue=(Object(E.g)(),Object(E.i)().id),pe=Object(w.a)().user,me=z(),ve=Object(E.g)(),fe=Object(o.useCallback)((function(){var e=Math.random().toString(),t=e.substr(2,e.length-1);R((function(e){return Object(i.a)(Object(i.a)({},e),{},{id:t})}))}),[]),ge=[],be=[],he=[],ye=Object(s.a)(),xe=Object(l.a)(ye,2),Ee=xe[0],Oe=xe[1];var je=Object(o.useState)(""),Ne=Object(l.a)(je,2),we=Ne[0],_e=Ne[1];Object(o.useEffect)((function(){N.g.get("getDeliveryNoteEdit/".concat(ue)).then((function(e){var t,a,n,l,r,o,c,s=e.data;console.log(s),X(null===s||void 0===s?void 0:s.products),A(null===s||void 0===s||null===(t=s.note[0])||void 0===t?void 0:t.firm_name),_e(null===s||void 0===s||null===(a=s.note)||void 0===a?void 0:a.type),L("quote"==(null===s||void 0===s||null===(n=s.note)||void 0===n?void 0:n.type)?null===s||void 0===s||null===(l=s.note[0])||void 0===l?void 0:l.quotation_no:null===s||void 0===s||null===(r=s.note[0])||void 0===r?void 0:r.invoice_no),U(null===s||void 0===s||null===(o=s.note[0])||void 0===o?void 0:o.po_number),ie(null===s||void 0===s||null===(c=s.sales)||void 0===c?void 0:c.discount_in_p),R(Object(i.a)(Object(i.a)({},q),{},{item:null===s||void 0===s?void 0:s.noteDetails}))}))}),[ue,t,O,fe]);var Ie=0,ke=0,Ce=0,qe=q.item,ze=void 0===qe?[]:qe,Se=(q.quote,q.vat),Re=q.loading;return c.a.createElement("div",{className:"m-sm-30"},c.a.createElement(d.a,{elevation:3},c.a.createElement("div",{className:Object(j.default)("invoice-viewer py-4",me.invoiceEditor)},c.a.createElement(x.ValidatorForm,{autocomplete:"off",onSubmit:function(){var e=[];delete Object(i.a)({},q).loading;var t=Object(n.a)(q.item);Ce>0?(de(!0),e.is_partial=!0):(e.is_partial=!1,e.is_completed=!0),e.quotation_detail=t,e.quotation_id=parseInt(ue),e.discount_in_percentage=ne,e.total_value=parseFloat(Ie).toFixed(2),e.grand_total=ke,e.vat_in_value=parseFloat(Se).toFixed(2),e.user_id=pe.id,e.div_id=localStorage.getItem("division");var a=Object.assign({},e);N.g.post("deleveryUpdate",a).then((function(e){I.a.fire({title:"Success",type:"success",icon:"success",text:"Data Updated successfully."}),ve.push(N.w+"/invview/".concat(ue,"/invoice"))})).catch((function(e){I.a.fire({title:"Error",type:"error",icon:"warning",text:"Something Went Wrong."}).then((function(e){R(Object(i.a)(Object(i.a)({},q),{},{loading:!1}))}))}))},onError:function(e){return null}},c.a.createElement("div",{className:"viewer_actions px-4 flex justify-between"},c.a.createElement("div",{className:"mb-6"},c.a.createElement("h3",{align:"left"},"DELIVERY NOTE")),c.a.createElement("div",{className:"mb-6"},c.a.createElement(u.a,{className:"mr-4 py-2",variant:"outlined",color:"secondary",onClick:function(){ve.push(N.w+"/invview/".concat(ue,"/invoice"))}},c.a.createElement(p.a,null,"cancel")," CANCEL"),c.a.createElement(u.a,{type:"submit",className:"py-2",variant:"outlined",color:"primary",disabled:Re},c.a.createElement(p.a,null,"save")," SAVE"))),c.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},c.a.createElement("div",null,c.a.createElement("h5",{className:"font-normal capitalize"},"quote"==we?c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,"Quotation Number: ")):c.a.createElement(c.a.Fragment,null,c.a.createElement("strong",null,"Invoice Number: ")),c.a.createElement("span",null,V)),c.a.createElement("h5",{className:"font-normal capitalize"},c.a.createElement("strong",null,"Company Name: ")," ",c.a.createElement("span",null,M))),c.a.createElement("div",null,c.a.createElement("div",{className:"text-right"},c.a.createElement("h5",{className:"font-normal"},c.a.createElement("strong",null,"Due date: "),c.a.createElement("span",null,C()(F).format("DD MMM YYYY")))),c.a.createElement("div",{className:"text-right"},c.a.createElement("h5",{className:"font-normal"},c.a.createElement("strong",null,"P.O Number: "),c.a.createElement("span",null,Q))))),c.a.createElement(m.a,null),c.a.createElement(v.a,{className:"mb-4"},c.a.createElement(f.a,null,c.a.createElement(g.a,{className:"bg-default"},c.a.createElement(b.a,{className:"pl-sm-24",style:{width:70},align:"left"},"S.NO."),c.a.createElement(b.a,{className:"px-0",style:{width:"400px"}},"RFQ DESCRIPTION"),c.a.createElement(b.a,{className:"px-0",style:{width:70}},"UOM"),c.a.createElement(b.a,{className:"px-0",style:{width:"150px"}},"QUANTITY"),c.a.createElement(b.a,{className:"px-0",style:{width:"150px"}},"DELIVERED QTY"),c.a.createElement(b.a,{className:"px-0",style:{width:"150px"}},"DELIVERING QTY"),c.a.createElement(b.a,{className:"px-0",style:{width:"150px"}},"BALANCE QTY"))),c.a.createElement(h.a,null,ze.map((function(e,t){return Ce+=parseInt(e.balance),oe?(Ie+=parseFloat(e.total_amount),Se=(15*(Ie-parseFloat(J*Ie/100))/100).toFixed(2),ke=(Ie-parseFloat(J*Ie/100)+parseFloat(Se)).toFixed(2)):(Ie+=parseFloat(e.total_amount),Se=(15*Ie/100).toFixed(2),ke=(Ie+15*Ie/100).toFixed(2)),c.a.createElement(g.a,{key:t},c.a.createElement(b.a,{className:"pl-sm-24 capitalize",align:"left",style:{width:50}},t+1),c.a.createElement(b.a,{className:"pl-0 mr-2 capitalize",align:"left",style:{width:"300px"}},c.a.createElement(x.TextValidator,{label:"description",type:"text",name:"description",variant:"outlined",size:"small",multiline:!0,inputProps:{readOnly:!0},fullWidth:!0,value:null===e||void 0===e?void 0:e.descriptionss})),c.a.createElement(b.a,{className:"pl-0 capitalize",align:"left",style:{width:70}},c.a.createElement(x.TextValidator,{label:"UOM",type:"text",variant:"outlined",inputProps:{min:0,style:{textAlign:"center"}},size:"small",name:"uom",value:(null===e||void 0===e?void 0:e.unit_of_measure)?null===e||void 0===e?void 0:e.unit_of_measure:" "})),c.a.createElement(b.a,{className:"pl-0 capitalize",align:"center",style:{width:"150px"}},c.a.createElement(x.TextValidator,{label:"Quantity",type:"text",variant:"outlined",inputProps:{min:0,style:{textAlign:"center"}},size:"small",fullWidth:!0,name:"quantity",align:"center",min:"1",max:e.quantity,value:e?e.quantity:"",validators:["required"],errorMessages:["this field is required"]})),c.a.createElement(b.a,{className:"pl-0 capitalize",align:"center",style:{width:"150px"}},c.a.createElement(x.TextValidator,{label:"delivered quantity",type:"text",name:"delivered_quantity",align:"center",inputProps:{min:0,style:{textAlign:"center"}},fullWidth:!0,variant:"outlined",size:"small",value:e.delivered_quantity,validators:["required"],errorMessages:["this field is required"]})),c.a.createElement(b.a,{className:"pl-0 capitalize",align:"center",style:{width:"150px"}},c.a.createElement(x.TextValidator,{label:"delivery quantity",onChange:function(e){return function(e,t){e.persist();var a=Object(n.a)(q.item);a.map((function(a,n){if(t===n){parseInt(a.quantity),parseInt(a.delivered_quantity);if(e.target.value>parseInt(a.quantity));else{a[e.target.name]=e.target.value;var i=parseInt(a.quantity)-e.target.value;a.balance=parseInt(a.quantity)-(parseInt(a.quantity)-i)}return a}})),R(Object(i.a)(Object(i.a)({},q),{},{item:a}))}(e,t)},type:"text",inputProps:{ref:Oe(t+"delivered_quantity"),min:-1,style:{textAlign:"center"}},name:"delivering_quantity",onKeyDown:function(e){!function(e,t,a,n,i,l){if("Enter"===e.key&&!l){t.split(parseInt(t));var r,o=parseInt(t);r=3==localStorage.getItem("division")?++o+"descriptionss":++o+"description";try{var c;console.log(null===(c=Ee(r).current)||void 0===c?void 0:c.focus())}catch(h){}}if(39==(null===e||void 0===e?void 0:e.keyCode))if(null===a||void 0===a?void 0:a.includes("product_id"))he[parseInt(a)].focus();else if(null===a||void 0===a?void 0:a.includes("purch3ase_price"))be[parseInt(a)].focus();else if(null==a);else{var s;console.log(null===(s=Ee(a).current)||void 0===s?void 0:s.focus())}else if(38==(null===e||void 0===e?void 0:e.keyCode)){var d=t.split(parseInt(t)),u=parseInt(t);if(--u>=0){var p=u+d[1];p.includes("product_id")?he[parseInt(p)].focus():p.includes("purchase_3price")?be[parseInt(p)].focus():p.includes("invoice_no")?ge[parseInt(p)].focus():Ee(p).current.focus()}}else if(40!=(null===e||void 0===e?void 0:e.keyCode)||l){if(37==(null===e||void 0===e?void 0:e.keyCode)){var m,v;if(null==n);else if(n.includes("product_id")?he[parseInt(n)].focus():n.includes("purchase3_price")&&be[parseInt(n)].focus(),n.includes("invoice_no"))ge[parseInt(n)].focus();else console.log(null===(m=Ee(n))||void 0===m||null===(v=m.current)||void 0===v?void 0:v.focus())}}else{var f=t.split(parseInt(t)),g=parseInt(t),b=++g+f[1];try{b.includes("product_id")?he[parseInt(b)].focus():b.includes("purchase_p3rice")?be[parseInt(b)].focus():b.includes("invoice_no")?ge[parseInt(b)].focus():Ee(b).current.focus()}catch(h){console.error("eror")}}}(e,t+"delivered_quantity",null,null)},validators:["required","isNumber"],errorMessages:["this field is required","Input is not Valid"],fullWidth:!0,variant:"outlined",size:"small",value:e.delivering_quantity})),c.a.createElement(b.a,{className:"pl-0 capitalize",align:"left"},c.a.createElement(y.a,{label:"Balance Qty",type:"text",variant:"outlined",size:"small",name:"balance",fullWidth:!0,value:e.balance?e.balance:0})))})))),c.a.createElement("div",{className:"flex justify-end px-4 mb-4"},c.a.createElement("div",{className:"flex "},c.a.createElement("div",null)))))))}}}]);